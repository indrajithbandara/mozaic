<!DOCTYPE html><html><head><title>item_count.coffee</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../index.html" class="source"><span class="file_name">README</span></a><a href="../../core~/api_mock.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">api_mock.coffee</span></a><a href="../../core~/application_controller.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">application_controller.coffee</span></a><a href="../../core~/auth.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">auth.coffee</span></a><a href="../../core~/base_collection.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">base_collection.coffee</span></a><a href="../../core~/base_model.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">base_model.coffee</span></a><a href="../../core~/base_widgets/autocomplete.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">autocomplete.coffee</span></a><a href="../../core~/base_widgets/base_form.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">base_form.coffee</span></a><a href="../../core~/base_widgets/delete_form.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">delete_form.coffee</span></a><a href="../../core~/base_widgets/expanding_list.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">expanding_list.coffee</span></a><a href="../../core~/base_widgets/item_count.coffee.html" class="source selected"><span class="base_path">core~ / base_widgets / </span><span class="file_name">item_count.coffee</span></a><a href="../../core~/base_widgets/list.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">list.coffee</span></a><a href="../../core~/base_widgets/mediator_widget.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">mediator_widget.coffee</span></a><a href="../../core~/base_widgets/nested_attributes_form.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">nested_attributes_form.coffee</span></a><a href="../../core~/base_widgets/new_items_count.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">new_items_count.coffee</span></a><a href="../../core~/base_widgets/notification_bar.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">notification_bar.coffee</span></a><a href="../../core~/base_widgets/notifications.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">notifications.coffee</span></a><a href="../../core~/base_widgets/order_by.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">order_by.coffee</span></a><a href="../../core~/base_widgets/update_form.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">update_form.coffee</span></a><a href="../../core~/base_widgets/url.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">url.coffee</span></a><a href="../../core~/base_widgets/user_item_count.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">user_item_count.coffee</span></a><a href="../../core~/base_widgets/widget_editor.coffee.html" class="source "><span class="base_path">core~ / base_widgets / </span><span class="file_name">widget_editor.coffee</span></a><a href="../../core~/channels_utils.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">channels_utils.coffee</span></a><a href="../../core~/constants.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">constants.coffee</span></a><a href="../../core~/context_processors.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">context_processors.coffee</span></a><a href="../../core~/controller.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">controller.coffee</span></a><a href="../../core~/core_modules.js.html" class="source "><span class="base_path">core~ / </span><span class="file_name">core_modules.js</span></a><a href="../../core~/datasource/channel/create.coffee.html" class="source "><span class="base_path">core~ / datasource / channel / </span><span class="file_name">create.coffee</span></a><a href="../../core~/datasource/channel/destroy.coffee.html" class="source "><span class="base_path">core~ / datasource / channel / </span><span class="file_name">destroy.coffee</span></a><a href="../../core~/datasource/channel/read.coffee.html" class="source "><span class="base_path">core~ / datasource / channel / </span><span class="file_name">read.coffee</span></a><a href="../../core~/datasource/channel/update.coffee.html" class="source "><span class="base_path">core~ / datasource / channel / </span><span class="file_name">update.coffee</span></a><a href="../../core~/datasource/channel.coffee.html" class="source "><span class="base_path">core~ / datasource / </span><span class="file_name">channel.coffee</span></a><a href="../../core~/datasource/datasource.coffee.html" class="source "><span class="base_path">core~ / datasource / </span><span class="file_name">datasource.coffee</span></a><a href="../../core~/datasource/gc.coffee.html" class="source "><span class="base_path">core~ / datasource / </span><span class="file_name">gc.coffee</span></a><a href="../../core~/datasource/refresher.coffee.html" class="source "><span class="base_path">core~ / datasource / </span><span class="file_name">refresher.coffee</span></a><a href="../../core~/datasource/scheduler.coffee.html" class="source "><span class="base_path">core~ / datasource / </span><span class="file_name">scheduler.coffee</span></a><a href="../../core~/datasource/widget.coffee.html" class="source "><span class="base_path">core~ / datasource / </span><span class="file_name">widget.coffee</span></a><a href="../../core~/flags_collection.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">flags_collection.coffee</span></a><a href="../../core~/interceptor.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">interceptor.coffee</span></a><a href="../../core~/layout.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">layout.coffee</span></a><a href="../../core~/loader.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">loader.coffee</span></a><a href="../../core~/loading_animation.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">loading_animation.coffee</span></a><a href="../../core~/logging/sentry_logger.coffee.html" class="source "><span class="base_path">core~ / logging / </span><span class="file_name">sentry_logger.coffee</span></a><a href="../../core~/logging/standard_logger.coffee.html" class="source "><span class="base_path">core~ / logging / </span><span class="file_name">standard_logger.coffee</span></a><a href="../../core~/mocks.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">mocks.coffee</span></a><a href="../../core~/modal_window.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">modal_window.coffee</span></a><a href="../../core~/module.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">module.coffee</span></a><a href="../../core~/mozaic_backbone_form.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">mozaic_backbone_form.coffee</span></a><a href="../../core~/profiler.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">profiler.coffee</span></a><a href="../../core~/pubsub.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">pubsub.coffee</span></a><a href="../../core~/raw_data.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">raw_data.coffee</span></a><a href="../../core~/router.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">router.coffee</span></a><a href="../../core~/scrollable_widget.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">scrollable_widget.coffee</span></a><a href="../../core~/utils/dom.coffee.html" class="source "><span class="base_path">core~ / utils / </span><span class="file_name">dom.coffee</span></a><a href="../../core~/utils/images.coffee.html" class="source "><span class="base_path">core~ / utils / </span><span class="file_name">images.coffee</span></a><a href="../../core~/utils/misc.coffee.html" class="source "><span class="base_path">core~ / utils / </span><span class="file_name">misc.coffee</span></a><a href="../../core~/utils/mozaic.coffee.html" class="source "><span class="base_path">core~ / utils / </span><span class="file_name">mozaic.coffee</span></a><a href="../../core~/utils/time.coffee.html" class="source "><span class="base_path">core~ / utils / </span><span class="file_name">time.coffee</span></a><a href="../../core~/utils/urls.coffee.html" class="source "><span class="base_path">core~ / utils / </span><span class="file_name">urls.coffee</span></a><a href="../../core~/utils.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">utils.coffee</span></a><a href="../../core~/widget/aggregated_channels.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">aggregated_channels.coffee</span></a><a href="../../core~/widget/backbone_events.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">backbone_events.coffee</span></a><a href="../../core~/widget/channels.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">channels.coffee</span></a><a href="../../core~/widget/modal_widget.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">modal_widget.coffee</span></a><a href="../../core~/widget/params.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">params.coffee</span></a><a href="../../core~/widget/rendering.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">rendering.coffee</span></a><a href="../../core~/widget/states.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">states.coffee</span></a><a href="../../core~/widget/widget.coffee.html" class="source "><span class="base_path">core~ / widget / </span><span class="file_name">widget.coffee</span></a><a href="../../core~/widget_starter.coffee.html" class="source "><span class="base_path">core~ / </span><span class="file_name">widget_starter.coffee</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>item_count.coffee</h1><div class="filepath">core~/base_widgets/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">define</span> <span class="p">[</span><span class="s">&#39;cs!widget&#39;</span><span class="p">],</span> <span class="nf">(Widget) -&gt;</span>

    <span class="k">class</span> <span class="nx">ItemCountWidget</span> <span class="k">extends</span> <span class="nx">Widget</span>
        <span class="nv">template_name: </span><span class="s">&#39;templates/item-count.hjs&#39;</span>

        <span class="nv">params_defaults:</span>
            <span class="nv">single_item: </span><span class="s">&#39;data-params&#39;</span>
            <span class="nv">multiple_items: </span><span class="s">&#39;data-params&#39;</span>
            <span class="nv">path: </span><span class="s">&#39;data-params&#39;</span>
            <span class="nv">value: </span><span class="s">&#39;data-params&#39;</span>
            <span class="nv">collection: </span><span class="s">&#39;data-params&#39;</span>
            <span class="nv">icon: </span><span class="s">&#39;data-params&#39;</span>
            <span class="nv">id: </span><span class="s">&#39;data-params&#39;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p>Used to give a color to the text</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">color: </span><span class="s">&#39;data-params&#39;</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p>In some cases the text needs to go before the number</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">text_first: </span><span class="s">&#39;data-params&#39;</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p>Show somethingafter the number, like % sign</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">suffix: </span><span class="s">&#39;data-params&#39;</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>Put something before the number, like a + sign</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">prefix: </span><span class="s">&#39;data-params&#39;</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>If the number is greater than max<em>value, display max</em>value</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">max_value: </span><span class="s">&#39;data-params&#39;</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>Flag which controls if the widget should display rounded value + tooltip
or the actual value. Default true, ie. show rounded value + tooltip</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">show_rounded: </span><span class="s">&#39;data-params&#39;</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>Round a number to a specific number of decimals, which means
- round<em>value: 0 rounds to integer form
- round</em>value: 2 rounds to a 2-decial float
- round_value null/undefined leaves the number intact</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">round_value: </span><span class="s">&#39;data-params&#39;</span>

        <span class="nv">params_required: </span><span class="p">[</span><span class="s">&#39;single_item&#39;</span><span class="p">,</span> <span class="s">&#39;multiple_items&#39;</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">]</span>

        <span class="nv">post_render:</span>
            <span class="nv">tooltip:</span>
                <span class="nv">placement: </span><span class="s">&#39;right&#39;</span>

        <span class="nv">initialize: </span><span class="o">=&gt;</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>If the value to be displayed is received in data-params,
render the layout with this value and the other options
and ignore the channels.
This fixed was made because sometimes the location percentages
were not shown</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span> <span class="nx">@value</span><span class="o">?</span>
                <span class="nx">@render</span><span class="p">(</span><span class="nx">@value</span><span class="p">)</span>
            <span class="k">else</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><p>Subscribe the widget to /count channel</p>
</td><td class="code"><div class="highlight"><pre>                <span class="vi">@subscribed_channels = </span><span class="p">[</span><span class="s">&#39;/count&#39;</span><span class="p">]</span>
                <span class="vi">@loading_channels = </span><span class="p">[</span><span class="s">&#39;/count&#39;</span><span class="p">]</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p>Default value for show_rounded is true</p>
</td><td class="code"><div class="highlight"><pre>            <span class="vi">@show_rounded = </span><span class="kc">true</span> <span class="k">unless</span> <span class="nx">@show_rounded</span><span class="o">?</span>

        <span class="nv">changeState: </span><span class="nf">(state, params...) -&gt;</span>
            <span class="k">super</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">params</span><span class="p">...)</span>
            <span class="k">if</span> <span class="nx">state</span> <span class="k">in</span> <span class="p">[</span><span class="s">&#39;init&#39;</span><span class="p">,</span> <span class="s">&#39;empty&#39;</span><span class="p">]</span>
                <span class="nx">@renderLayout</span><span class="p">(</span><span class="nx">@getStateTemplateVars</span><span class="p">(</span><span class="nx">params</span><span class="p">...))</span>

        <span class="nv">loadingStart: </span><span class="p">()</span> <span class="nf">-&gt;</span>
            <span class="nx">Utils</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="nx">Constants</span><span class="p">.</span><span class="nx">ANALYTICS_LOADING_NOTIFICATION</span><span class="p">,</span> <span class="s">&#39;loading&#39;</span><span class="p">)</span>
            <span class="nx">@view</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;loading-widget&#39;</span><span class="p">)</span>

        <span class="nv">loadingEnd: </span><span class="p">()</span> <span class="nf">-&gt;</span>
            <span class="nx">Utils</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s">&#39;loading&#39;</span><span class="p">)</span>
            <span class="nx">@view</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&#39;loading-widget&#39;</span><span class="p">)</span>

        <span class="nv">get_count: </span><span class="nf">(params) =&gt;</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><p>Whenever a new mention count arrives, display it.</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span> <span class="nx">params</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s">&#39;change&#39;</span> <span class="o">or</span> <span class="nx">params</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s">&#39;reset&#39;</span> <span class="o">or</span> <span class="nx">params</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s">&#39;remove&#39;</span> <span class="o">or</span> <span class="nx">params</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s">&#39;add&#39;</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><p>Just in case nothing is filled in to avoid displaying undefined or undefineds</p>
</td><td class="code"><div class="highlight"><pre>                <span class="vi">@single_item = </span><span class="nx">@single_item</span> <span class="o">?</span> <span class="s">&#39;&#39;</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><p>TODO: Multiple values should be automatically generated for
direct values as well (when sending <code>value</code> as throuh data-params)</p>
</td><td class="code"><div class="highlight"><pre>                <span class="vi">@multiple_items = </span><span class="nx">@multiple_items</span> <span class="o">?</span> <span class="p">(</span><span class="k">if</span> <span class="nx">@single_item</span><span class="o">?</span> <span class="o">and</span> <span class="nx">@single_item</span> <span class="o">isnt</span> <span class="s">&#39;&#39;</span> <span class="k">then</span>  <span class="nx">@single_item</span> <span class="o">+</span> <span class="s">&#39;s&#39;</span> <span class="k">else</span> <span class="s">&#39;&#39;</span> <span class="p">)</span>
                <span class="nv">item_count = </span><span class="nx">@extractCountFromParams</span><span class="p">(</span><span class="nx">params</span><span class="p">)</span>

                <span class="k">if</span> <span class="nx">@round_value</span><span class="o">?</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><p>Round value to specified decimals</p>
</td><td class="code"><div class="highlight"><pre>                    <span class="nv">range = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nx">@round_value</span><span class="p">)</span>
                    <span class="nv">item_count = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">item_count</span> <span class="o">*</span> <span class="nx">range</span><span class="p">)</span> <span class="o">/</span> <span class="nx">range</span>

                <span class="nx">@render</span><span class="p">(</span><span class="nx">item_count</span><span class="p">)</span>

        <span class="nv">render: </span><span class="nf">(item_count) =&gt;</span></pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><p>Avoid showing +0 or -0 if the prefix is a + or - sign</p>
</td><td class="code"><div class="highlight"><pre>            <span class="vi">@prefix = </span><span class="k">if</span> <span class="p">(</span><span class="nx">@prefix</span> <span class="k">in</span> <span class="p">[</span><span class="s">&#39;+&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">]</span> <span class="o">and</span> <span class="nx">item_count</span> <span class="o">is</span> <span class="mi">0</span><span class="p">)</span> <span class="k">then</span> <span class="kc">null</span> <span class="k">else</span> <span class="nx">@prefix</span></pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><p>Determine if item<em>count is greater than max</em>value</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">item_count = </span><span class="nx">@max_value</span> <span class="k">if</span> <span class="nx">@max_value</span><span class="o">?</span> <span class="o">and</span> <span class="nx">item_count</span> <span class="o">&gt;</span> <span class="nx">@max_value</span>
            <span class="nv">estimated_item_count = </span><span class="nx">Utils</span><span class="p">.</span><span class="nx">human_count</span> <span class="nx">item_count</span></pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><p>Determine if we will display the actual value or the estimated + tooltip with the real one.</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">show_real_value = </span><span class="o">not</span> <span class="nx">@show_rounded</span> <span class="o">or</span> <span class="p">(</span><span class="o">+</span><span class="nx">item_count</span> <span class="o">is</span> <span class="o">+</span><span class="nx">estimated_item_count</span><span class="p">)</span>

            <span class="nx">@renderLayout</span>
                <span class="nv">state: </span><span class="s">&#39;available&#39;</span>
                <span class="nv">count: </span><span class="nx">item_count</span>
                <span class="nv">items: </span><span class="k">if</span> <span class="nx">item_count</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">then</span> <span class="nx">@single_item</span> <span class="k">else</span> <span class="nx">@multiple_items</span>
                <span class="nv">icon: </span><span class="nx">@icon</span>
                <span class="nv">id: </span><span class="nx">@id</span>
                <span class="nv">style: </span><span class="k">if</span> <span class="nx">@color</span><span class="o">?</span> <span class="k">then</span> <span class="s">&quot; style=color:</span><span class="si">#{</span><span class="nx">@color</span><span class="si">}</span><span class="s">; &quot;</span>
                <span class="nv">text_first: </span><span class="nx">@text_first</span>
                <span class="nv">suffix: </span><span class="k">if</span> <span class="nx">@suffix</span><span class="o">?</span> <span class="k">then</span> <span class="nx">@suffix</span>
                <span class="nv">prefix: </span><span class="k">if</span> <span class="nx">@prefix</span><span class="o">?</span> <span class="k">then</span> <span class="nx">@prefix</span>
                <span class="nv">show_real_value: </span><span class="nx">show_real_value</span>

        <span class="nv">isChannelDataEmpty: </span><span class="nf">(event) -&gt;</span></pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><p>Describes the condition for this widget
to be in an "EMPTY" (no data state). It's a condition
applied to the data on it's subscribed channels,
in this case the /count channel. If the condition is
met the empty state of the widget is triggered (if it
exists).</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><p>@return {boolean} True if the extracted count is 0</p>
</td><td class="code"><div class="highlight"><pre>            <span class="nv">count = </span><span class="nx">@extractCountFromParams</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
            <span class="k">return</span> <span class="nx">count</span> <span class="o">is</span> <span class="mi">0</span> <span class="o">or</span> <span class="nx">count</span> <span class="o">is</span> <span class="kc">null</span>

        <span class="nv">extractCountFromParams: </span><span class="nf">(params = {}) -&gt;</span></pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><p>This widget supports counts coming in from
various datasources: the collection length,
a data path in an analytics call or a specified
value. Use this method to extract the value from
the incoming params</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span> <span class="nx">@collection</span>
                <span class="k">return</span> <span class="nx">params</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span>
            <span class="k">if</span> <span class="nx">@path</span>
                <span class="k">return</span> <span class="nx">params</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">@path</span><span class="p">)</span></pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><p>This is useful only when the path is hard to get</p>
</td><td class="code"><div class="highlight"><pre>            <span class="k">if</span> <span class="nx">@value</span>
                <span class="k">return</span> <span class="nx">@value</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="nx">ItemCountWidget</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Mon Aug 05 2013 15:56:31 GMT+0300 (EEST)  </div></div></body></html>